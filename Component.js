sap.ui.define(["sap/ui/core/UIComponent","sap/ui/core/Core","sap/m/MessageToast","sap/ui/core/date/Gregorian","./ComponentLoader","./model/models","./model/formatter"],function(e,t,n,r,s,o,a){"use strict";const i="https://gruene-ueberherrn.github.io/ueberherrn-app-data/dutyContact.json";const u="https://gruene-ueberherrn.github.io/ueberherrn-app-data/dutyCycle.json";const h="https://gruene-ueberherrn.github.io/ueberherrn-app-data/importantNumbers.json";const p="https://gruene-ueberherrn.github.io/ueberherrn-app-data/hotels.json";return e.extend("gruene.ueberherrn.Component",{metadata:{manifest:"json"},init:function(){this._pStandByDutyData=this._getStandByDutyData();this._pNumbersData=this._getNumbersData();this._pHotelsData=this._getHotelsData();e.prototype.init.apply(this,arguments);a.init(this.getModel("i18n").getResourceBundle());this.setModel(o.createDeviceModel(),"device");this.getRouter().initialize();var n=t.getEventBus();n.subscribe("grueneUeberherrn","newVersionRefresh",this.onNewVersionRefresh,this);n.subscribe("grueneUeberherrn","googleAnalyticsOptOut",this.onGoogleAnalyticsOptOut,this)},onNewVersionRefresh:function(){n.show(this.getModel("i18n").getResourceBundle().getText("newVersionRefresh"),{duration:5e3,closeOnBrowserNavigation:false})},onGoogleAnalyticsOptOut:function(){n.show(this.getModel("i18n").getResourceBundle().getText("googleAnalyticsOptOut"),{duration:5e3,closeOnBrowserNavigation:false})},requestGet:function(e){var t=new XMLHttpRequest;t.open("GET",e,true);return new Promise((e,n)=>{t.onload=function(){if(t.status>=200&&t.status<400){e(t.responseText)}else{n(t)}};t.onerror=function(){n(t)};t.send()})},getStandByDutyData:function(){return this._pStandByDutyData},getNumbersData:function(){return this._pNumbersData},getHotelsData:function(){return this._pHotelsData},_getStandByDutyData:function(){return new Promise((e,t)=>{var n={dutyContact:{},dutyCycle:[]};Promise.all([this.requestGet(i),this.requestGet(u)]).then(t=>{n.dutyContact=JSON.parse(t[0]);n.dutyCycle=JSON.parse(t[1]);e(n)},()=>t(n))})},_getNumbersData:function(){return new Promise((e,t)=>{this.requestGet(h).then(t=>{e(JSON.parse(t))},()=>t([]))})},_getHotelsData:function(){return new Promise((e,t)=>{this.requestGet(p).then(t=>{e(JSON.parse(t))},()=>t([]))})}})});