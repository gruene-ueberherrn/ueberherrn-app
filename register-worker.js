function refreshUI(e){function r(r){if(r===10){console.log("New service worker could not be activated after 10 seconds.");return}if(!e.waiting){window.setTimeout(()=>{autoRefresh((r||0)+1)},1e3)}else{e.waiting.postMessage("skipWaiting")}}window.setTimeout(()=>{if(window.sap&&window.sap.ui&&window.sap.ui.require){sap.ui.require(["sap/ui/core/Core"],e=>{e.getEventBus().publish("grueneUeberherrn","newVersionRefresh")})}window.setTimeout(r,2e3)},2e3)}function onNewServiceWorker(e,r){if(e.waiting){return r()}function i(){e.installing.addEventListener("statechange",e=>{if(e.target.state==="installed"){r()}})}if(e.installing){return i()}e.addEventListener("updatefound",i)}if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(e=>{console.log("Service Worker Registered");if(!navigator.serviceWorker.controller){return}var r=false;navigator.serviceWorker.addEventListener("controllerchange",e=>{if(r){return}r=true;console.log("Controller loaded");window.location.reload()});onNewServiceWorker(e,()=>{refreshUI(e)})})})}