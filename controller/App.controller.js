sap.ui.define(["./BaseController","sap/m/MessageBox"],function(e,t){"use strict";return e.extend("gruene.ueberherrn.controller.App",{onInit:function(){this._handlePwaInstallation()},onAfterRendering:function(){this.getOwnerComponent().getEventBus().publish("grueneUeberherrn","initialAppRenderingFinished")},_handlePwaInstallation:function(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault();this._oDeferredPromptEvent=e;this._askForInstallation()})},_askForInstallation:function(){window.setTimeout(()=>{let e=this.getResourceBundle();t.show(e.getText("pwaInstallationQuestion"),{title:e.getText("pwaInstallationTitle"),actions:[t.Action.OK,t.Action.CANCEL],onClose:e=>{if(e===t.Action.OK){window.setTimeout(()=>{this._oDeferredPromptEvent.prompt();if(window.gtag){gtag("event","install")}},500)}}})},500)}})});